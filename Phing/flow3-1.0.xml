<?xml version="1.0"?>
<project name="imported" basedir="." default=""  description="">
	
	<target name="build-flow3-1.0" depends="bootstrap">
		<echo>----------------------------------------</echo>
		<echo>| Generating FLOW3 1.0 API              |</echo>
		<echo>----------------------------------------</echo>

		<!-- check version http://typo3.org/download/packages/ -->
		<property name="tagName" value="FLOW3-1.0.4"/><!-- MINOR: CHANGE ME NEXT VERSION OF TYPO3 -->
		<property name="tagNameDisplay" value="1.0.4"/><!-- MINOR: CHANGE ME NEXT VERSION OF TYPO3 -->
		<property name="currentStableVersion" value="true"/><!-- MAJOR: CHANGE ME NEXT VERSION OF TYPO3 -->
		
		<property name="version" value="flow3-1.0"/>
		<property name="deployPath" value="flow3"/>
		<property name="deployPathName" value="10"/>
		<property name="repository" value="git://git.typo3.org/FLOW3/Packages/TYPO3.FLOW3.git"/>

		<!-- Initialize the environment -->
		<mkdir dir="${path.build.api}${version}" />
		<mkdir dir="${path.www}flow3" />

		<!-- Reset the repository (optional) -->
		<!-- <delete dir="${path.source}${version}" /> -->
		<download repository="${repository}" target="${path.source}${version}" tagName="${tagName}" />
		
		<!-- Reset the API (recommanded) -->
		<delete dir="${path.build.api}${version}" />
		
		<!-- Generate the PHP UML API -->
		<phpuml source="${path.source}${version}" target="${path.build.api}${version}" tagName="${tagNameDisplay}" />


		<!-- Archive -->
		<archive source="${path.build.api}${version}" target="${path.build.archive}" version="${version}" />

		<!-- Deploy -->
		<deploy version="${version}" deployPath="${deployPath}" deployPathName="${deployPathName}" current="${currentStableVersion}"/>

		<echo>OK</echo>
	</target>
	
</project>
